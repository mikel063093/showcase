{% extends "plantilla/principal.html.twig" %}

{% block tituloLocal %}Gesti√≥n de Establecimientos{% endblock %}

{% block lblAdicionar %}
Adicionar Establecimiento
{% endblock %}

{% block js %}

    <script>
    $(document).ready(function(){

         $.ajax({
            type: "POST",
            url: '{{path("registrosEstablecimientos")}}',
            dataType: "html",           
            success: function(data) {
                $('#registros').html(data);
            }
        });
    });

    $('#btn-adicionar').click(function(){
        
        $.ajax({
            url: '{{path("nuevoEstablecimiento")}}',
            type: 'POST',
            dataType: 'html',
            success:function(data){
                
                $('#modal-title').html('Registro de Establecimiento');
                $('#modal-content').html(data);
                $('#modal-footer').html('<button type="button" id="btn-guardar" class="btn btn-danger" >Guardar</button>');
                $('#modal').modal('show');
                $('#btn-guardar').click(function(){
                    $('#form-registro').submit();
                });

                $('#close-modal').click(function(){
                    $('#btn-guardar').unbind();

                    $('#modal').modal('hide');
                    $('#modal-title').html('');
                    $('#modal-content').html('<br>CARGANDO . . .');
                    $('#modal-footer').html('');
                });

            }

        });
    });


    

    </script>
{% endblock %}