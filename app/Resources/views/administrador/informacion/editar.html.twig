<script type="text/javascript">
  $('#form-editar').validate({
        rules: {

            'info[nosotros]': {  required: true },

        },
        messages:{

            'info[nosotros]': {  required: 'El campo Nosotros es obligatorio' },
        },
        submitHandler: function(form) {
           enviar(form);
        },
        showErrors: function(errorMap, errorList) {
            if (errorList.length > 0) {
            }
        },
        invalidHandler: function(event, validator) {
            if (validator.errorList.length > 0) {
              for (var i = 0; i < validator.errorList.length; i++) {
                mostrarMensaje(validator.errorList[i].message,'Error');
              };
                return false;
            }
        },
        errorPlacement: function(error, element) {
            return false;
        }
    });

     function enviar(form){
      $('#modal-cargando').modal('show');
        var datos = new FormData(form);
        $.ajax({
            url:"{{path('actualizarNosotros')}}",
            type: 'post',
            dataType: 'json',
            data: datos,
            processData: false,
            contentType: false,
            success: function (data){
                if(data.valor){
                  $.ajax({
                    type: "POST",
                    url: '{{path('nosotrosAdmin')}}',
                    dataType: "html",

                    success: function(data) {
                        $('#contenido').html(data);
                    }
                  });

                  mostrarMensaje(data.mensaje,'Exito');         
                }else{

                  mostrarMensaje(data.mensaje,'Error');
                }

                $('#modal-cargando').modal('hide');
            }

        });


    }

  $('#info_file').change(function (){
      validacion=true;
      var sizeByte = this.files[0].size;
      var nombre = this.files[0].name;
      var file,img;
      var extensiones=["JPG", "JPEG", "PNG"];
      var ext=nombre.substring(nombre.indexOf('.')+1).toUpperCase();
      if (extensiones.indexOf(ext) === -1){
          crearMensaje(0, 'Las extensiones permitidas son: jpg, jpeg y png.');
          $(this).val('');
          validacion= false;
      }else{
          $("#imgPreviewEmpresa").attr("style","display:block;");
          var file = $("#articulo_file").val();
          var ruta = URL.createObjectURL(this.files[0]);
          $("#imgPreviewEmpresa").fadeIn("fast").attr('src',URL.createObjectURL(this.files[0]));
      }
  });


  $('#btn-actualizar').click(function(){
      $('#form-editar').submit();
  });

  $('#btn-cancelar').click(function(){
      $('#btn-cancelar').unbind();
      $('#btn-actualizar').unbind();
      $.ajax({
          url: "{{path('nosotrosAdmin')}}",
          type: 'POST',
          dataType: 'html',
          success:function(data){
              $('#contenido').html(data);
          }

      });
  });





</script>
<div class="content-panel">
    <h4><i class="fa fa-angle-right"></i>Editar Nosotros</h4>

    <div id="registros">
        <div class="row">
            <div class="col-sm-8 col-md-offset-1">
{{ form_start(form, {'attr': {'id': 'form-editar','class':'form-horizontal style-form' }}) }}

<div class="form-group">
    <label class="col-sm-3 col-sm-3 control-label"><strong>Nosotros</strong></label>
    <div class="col-sm-9">
        {{ form_widget(form.nosotros, {'attr': {'class': 'form-control'}}) }}
    </div>
</div>

<input type="hidden" name="id_entity" value="{{ entity.id }}">

<div class="form-group">
    <label class="col-sm-3 col-sm-3 control-label"><strong>Imagen Nosotros(*)</strong></label>
    <div class="col-sm-9">
        {{ form_widget(form.file,{'attr':{'class':'input-file'}}) }}
        <img {% if not (entity.imagenNosotros) or entity.imagenNosotros == ""%}style="display: none"{%endif%} id="imgPreviewEmpresa" src="{% if entity.imagenNosotros and entity.imagenNosotros != ""%}{{asset('imagenes/nosotros/' ~ entity.imagenNosotros)}}{%endif%}" alt="" height="80" />
    </div>
</div>
<div class="form-group">
    <button type="button" id="btn-cancelar" class="btn btn-danger" >Cancelar</button><button type="button" id="btn-actualizar" class="btn btn-danger" >Actualizar</button>
</div>
{{ form_rest(form) }}
            </div>

        </div>
    </div>
</div>